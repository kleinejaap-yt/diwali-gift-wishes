<!DOCTYPE html>
<html>
<head>
    <title>Image Sharing Test</title>
</head>
<body>
    <h1>Test Image URL Size</h1>
    <input type="file" id="testFile" accept="image/*">
    <div id="result"></div>
    
    <script>
        document.getElementById('testFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Test different sizes
                    [400, 300, 200, 150, 100].forEach(maxSize => {
                        let width = img.width;
                        let height = img.height;
                        
                        if (width > height) {
                            if (width > maxSize) {
                                height *= maxSize / width;
                                width = maxSize;
                            }
                        } else {
                            if (height > maxSize) {
                                width *= maxSize / height;
                                height = maxSize;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        const dataUrl = canvas.toDataURL('image/jpeg', 0.7);
                        const urlWithImage = 'https://example.com/?name=Test&image=' + encodeURIComponent(dataUrl);
                        
                        document.getElementById('result').innerHTML += 
                            `<p>${maxSize}px: ${(dataUrl.length/1024).toFixed(2)}KB, URL length: ${urlWithImage.length}</p>`;
                    });
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });
    </script>
</body>
</html>
